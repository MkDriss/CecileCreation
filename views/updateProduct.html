{{>header}}
<script>
    function showDiv(divId, element) {
        if (element.value == "addCategory" || element.value == "addProductMaterial") {
            document.getElementById(divId).style.display = "block";
        }
        else {
            document.getElementById(divId).style.display = "none";
        }
    }

    function showElement(showElementId, hideElementId, cancel) {

        document.getElementById(showElementId).style.display = 'flex';
        document.getElementById(hideElementId).style.display = 'none';
        if (cancel === 1) {
            document.getElementById('cancelButton').style.display = 'flex';
        } else {
            document.getElementById('cancelButton').style.display = 'none';
        }
    }
</script>

{{#admin}}
{{#products}}
<div id="updateProduct">
    <div id="product">
        <div id="title">Update Product</div>
        <div id="container">
            <div id="left_container">
                <div class="productPictures">
                    {{#productPictures}}
                    <img src="/{{pictureName}}" alt="ProductPicture" class="productPicture">
                    {{/productPictures}}
                </div>
            </div>
            <div id="middlebar"></div>
            <div id="right_container">
                <form action="/updateProduct/{{productId}}" method="POST" id="updateProductForm">
                    <div id="productInfos">
                        <div id="productBox">
                            <input type="text" name="productName" id="productName" value="{{productName}}">
                            <select name="productCategory" id="productCategory" onchange="showDiv('newCategory',this)">
                                <option name="productCategory" id="defaultCategory" value="default">Select a Category
                                </option>
                                {{#currentCategory}}
                                <option name="productCategory" id="productCategory" value="{{productCategory}}"
                                    selected>
                                    {{productCategory}}</option>
                                {{/currentCategory}}
                                {{#categories}}
                                <option name="productCategory" id="productCategory" value="{{productCategory}}">
                                    {{productCategory}}</option>
                                {{/categories}}
                                <option name="productCategory" id="productCategory" value="addCategory">New Category
                                </option>
                            </select>

                            <input type="text" name="newCategory" id="newCategory" placeholder="New Category">
                            <div id="dimensions">
                                <input type="number" name="productHeight" id="productHeight" value="{{productHeight}}"
                                    required>
                                <span>x</span>
                                <input type="number" name="productWidth" id="productWidth" value="{{productWidth}}"
                                    required>
                                <span>x</span>
                                <input type="number" name="productDepth" id="productDepth" value="{{productDepth}}"
                                    required>
                            </div>
                            <select name="productMaterial" id="productMaterial"
                                onchange="showDiv('newProductMaterial',this)">
                                <option name="productMaterial" id="defaultproductMaterial" value="None">Select a
                                    Material
                                </option>
                                {{#currentMaterial}}
                                <option name="productMaterial" id="productMaterial" value="{{productMaterial}}"
                                    selected>
                                    {{productMaterial}}</option>
                                {{/currentMaterial}}
                                {{#materials}}
                                <option name="productMaterial" id="{{productMaterial}}" value="{{productMaterial}}">
                                    {{productMaterial}}</option>
                                {{/materials}}
                                <option name="addProductMaterial" id="addProductMaterial" value="addProductMaterial">New
                                    Material</option>
                            </select>
                            <input type="text" name="newProductMaterial" id="newProductMaterial"
                                placeholder="New Material" style="display: none;">
                            <input type="number" name="productPrice" id="productPrice" value="{{productPrice}}">
                            <textarea name="productDescription" id="productDescription" cols="30"
                                rows="10">{{productDescription}}</textarea>
                        </div>
                        <div id="buttons">
                            <input type="submit" value="Update Product" id="updateProductButton">
                            <input type="button" class="button" value="Delete Product" id="deleteProductButton"
                                onclick="showElement('deleteProductForm', 'buttons', 0)">
                            <a href="/adminProductList" id="cancelButton" class="button">Cancel</a>
                        </div>
                    </div>
                </form>
                <form action="/deleteProduct/{{productId}}" method="POST" id="deleteProductForm">
                    <span id="msg">Do you really want to delete this product ?</span>
                    <div id="deleteButton">
                        <input type="submit" value="Delete" id="deleteButton" class="button">
                        <input type="button" class="button" name="clDeletePdBtn" id="clDeletePdBtn" value="Cancel"
                            onclick="showElement('buttons','deleteProductForm',1)">
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{{/products}}
{{/admin}}
{{>footer}}